{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Driver Pay</h2>
  <form method="post" class="grid-form">
    <div>
      <label>Driver</label>
      <select name="driver_id">
        <option value="all">All Drivers</option>
        {% for d in drivers %}
        <option value="{{d.id}}">{{d.name}}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label>From</label>
      <input type="date" name="date_from" required>
    </div>
    <div>
      <label>To</label>
      <input type="date" name="date_to" required>
    </div>
    <div class="full">
      <button class="btn-primary" type="submit">Generate / Download PDF</button>
    </div>
  </form>

  <table class="table">
    <thead>
      <tr><th>Date</th><th>Driver</th><th>Truck</th><th>Amount</th></tr>
    </thead>
    <tbody>
      {% for r in items %}
      <tr>
        <td>{{r.entry_date}}</td>
        <td>{{r.driver_name}}</td>
        <td>{{r.truck_name}}</td>
        <td>${{ '%.2f'|format(r.amount) }}</td>
      </tr>
      {% endfor %}
      {% if items|length == 0 %}
      <tr><td colspan="4" class="empty">No data.</td></tr>
      {% endif %}
    </tbody>
  </table>

  {% if pdf_path %}
  <div class="pdf-download">
    <a class="btn-primary" href="{{ url_for('download_report', fname=pdf_path.split('/')[-1]) }}">Download Driver Pay PDF</a>
  </div>
  {% endif %}
</div>
{% endblock %}
